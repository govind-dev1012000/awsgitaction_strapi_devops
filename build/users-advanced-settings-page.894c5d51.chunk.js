"use strict";(self.webpackChunkfull_strapi=self.webpackChunkfull_strapi||[]).push([[9460],{98352:(W,R,t)=>{t.r(R),t.d(R,{default:()=>se});var e=t(67294),b=t(23724),c=t(97132),P=t(80831),n=t(68547),O=t(14087),T=t(185),g=t(67838),h=t(49066),A=t(29728),L=t(35961),y=t(7681),u=t(91216),d=t(82562),s=t(72735),p=t(11276),x=t(74571),V=t(85018),H=t(81912),i=t(89031);const F=[{intlLabel:{id:(0,i.OB)("EditForm.inputToggle.label.email"),defaultMessage:"One account per email address"},description:{id:(0,i.OB)("EditForm.inputToggle.description.email"),defaultMessage:"Disallow the user to create multiple accounts using the same email address with different authentication providers."},name:"unique_email",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,i.OB)("EditForm.inputToggle.label.sign-up"),defaultMessage:"Enable sign-ups"},description:{id:(0,i.OB)("EditForm.inputToggle.description.sign-up"),defaultMessage:"When disabled (OFF), the registration process is forbidden. No one can subscribe anymore no matter the used provider."},name:"allow_register",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,i.OB)("EditForm.inputToggle.label.email-reset-password"),defaultMessage:"Reset password page"},description:{id:(0,i.OB)("EditForm.inputToggle.description.email-reset-password"),defaultMessage:"URL of your application's reset password page."},placeholder:{id:(0,i.OB)("EditForm.inputToggle.placeholder.email-reset-password"),defaultMessage:"ex: https://youtfrontend.com/reset-password"},name:"email_reset_password",type:"text",size:{col:6,xs:12}},{intlLabel:{id:(0,i.OB)("EditForm.inputToggle.label.email-confirmation"),defaultMessage:"Enable email confirmation"},description:{id:(0,i.OB)("EditForm.inputToggle.description.email-confirmation"),defaultMessage:"When enabled (ON), new registered users receive a confirmation email."},name:"email_confirmation",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,i.OB)("EditForm.inputToggle.label.email-confirmation-redirection"),defaultMessage:"Redirection url"},description:{id:(0,i.OB)("EditForm.inputToggle.description.email-confirmation-redirection"),defaultMessage:"After you confirmed your email, choose where you will be redirected."},placeholder:{id:(0,i.OB)("EditForm.inputToggle.placeholder.email-confirmation-redirection"),defaultMessage:"ex: https://youtfrontend.com/email-confirmation"},name:"email_confirmation_redirection",type:"text",size:{col:6,xs:12}}];var a=t(53209);const r=new RegExp("(^$)|((.+:\\/\\/.*)(d*)\\/?(.*))"),l=a.Ry().shape({email_confirmation_redirection:a.nK().when("email_confirmation",{is:!0,then:a.Z_().matches(r).required(),otherwise:a.Z_().nullable()}),email_reset_password:a.Z_(n.translatedErrors.string).matches(r,n.translatedErrors.regex).nullable()});var B=(m,f,v)=>new Promise((U,I)=>{var z=E=>{try{D(v.next(E))}catch(C){I(C)}},K=E=>{try{D(v.throw(E))}catch(C){I(C)}},D=E=>E.done?U(E.value):Promise.resolve(E.value).then(z,K);D((v=v.apply(m,f)).next())});const S=()=>B(void 0,null,function*(){const{data:m}=yield i.be.get((0,i.Gc)("advanced"));return m}),w=m=>i.be.put((0,i.Gc)("advanced"),m);var G=Object.defineProperty,Q=Object.defineProperties,X=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,_=(m,f,v)=>f in m?G(m,f,{enumerable:!0,configurable:!0,writable:!0,value:v}):m[f]=v,Y=(m,f)=>{for(var v in f||(f={}))$.call(f,v)&&_(m,v,f[v]);if(Z)for(var v of Z(f))re.call(f,v)&&_(m,v,f[v]);return m},q=(m,f)=>Q(m,X(f)),ee=(m,f,v)=>new Promise((U,I)=>{var z=E=>{try{D(v.next(E))}catch(C){I(C)}},K=E=>{try{D(v.throw(E))}catch(C){I(C)}},D=E=>E.done?U(E.value):Promise.resolve(E.value).then(z,K);D((v=v.apply(m,f)).next())});const ie=()=>e.createElement(n.CheckPagePermissions,{permissions:H.Z.readAdvancedSettings},e.createElement(oe,null)),oe=()=>{const{formatMessage:m}=(0,c.useIntl)(),f=(0,n.useNotification)(),{lockApp:v,unlockApp:U}=(0,n.useOverlayBlocker)(),{notifyStatus:I}=(0,O.G)(),z=(0,b.useQueryClient)();(0,n.useFocusWhenNavigate)();const K=(0,e.useMemo)(()=>({update:H.Z.updateAdvancedSettings}),[]),{isLoading:D,allowedActions:{canUpdate:E}}=(0,n.useRBAC)(K),{status:C,data:te}=(0,b.useQuery)("advanced",()=>S(),{onSuccess(){I(m({id:(0,i.OB)("Form.advancedSettings.data.loaded"),defaultMessage:"Advanced settings data has been loaded"}))},onError(){f({type:"warning",message:{id:(0,i.OB)("notification.error"),defaultMessage:"An error occured"}})}}),le=D||C!=="success",ae=(0,b.useMutation)(j=>w(j),{onSuccess(){return ee(this,null,function*(){yield z.invalidateQueries("advanced"),f({type:"success",message:{id:(0,i.OB)("notification.success.saved"),defaultMessage:"Saved"}}),U()})},onError(){f({type:"warning",message:{id:(0,i.OB)("notification.error"),defaultMessage:"An error occured"}}),U()},refetchActive:!0}),{isLoading:de}=ae,ce=j=>ee(void 0,null,function*(){v();const N=j.email_confirmation?j.email_confirmation_redirection:"";yield ae.mutateAsync(q(Y({},j),{email_confirmation_redirection:N}))});return le?e.createElement(T.o,{"aria-busy":"true"},e.createElement(n.SettingsPageTitle,{name:m({id:(0,i.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(g.T,{title:m({id:(0,i.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(h.D,null,e.createElement(n.LoadingIndicatorPage,null))):e.createElement(T.o,{"aria-busy":de},e.createElement(n.SettingsPageTitle,{name:m({id:(0,i.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(P.Formik,{onSubmit:ce,initialValues:te.settings,validateOnChange:!1,validationSchema:l,enableReinitialize:!0},({errors:j,values:N,handleChange:ne,isSubmitting:ue})=>e.createElement(n.Form,null,e.createElement(g.T,{title:m({id:(0,i.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"}),primaryAction:e.createElement(A.z,{loading:ue,type:"submit",disabled:!E,startIcon:e.createElement(V.Z,null),size:"S"},m({id:"global.save",defaultMessage:"Save"}))}),e.createElement(h.D,null,e.createElement(L.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(y.K,{spacing:4},e.createElement(s.Z,{variant:"delta",as:"h2"},m({id:"global.settings",defaultMessage:"Settings"})),e.createElement(p.r,{gap:6},e.createElement(x.P,{col:6,s:12},e.createElement(u.P,{label:m({id:(0,i.OB)("EditForm.inputSelect.label.role"),defaultMessage:"Default role for authenticated users"}),value:N.default_role,hint:m({id:(0,i.OB)("EditForm.inputSelect.description.role"),defaultMessage:"It will attach the new authenticated user to the selected role."}),onChange:M=>ne({target:{name:"default_role",value:M}})},te.roles.map(M=>e.createElement(d.W,{key:M.type,value:M.type},M.name)))),F.map(M=>{let J=N[M.name];return J||(J=M.type==="bool"?!1:""),e.createElement(x.P,Y({key:M.name},M.size),e.createElement(n.GenericInput,q(Y({},M),{value:J,error:j[M.name],disabled:M.name==="email_confirmation_redirection"&&N.email_confirmation===!1,onChange:ne})))}))))))))},se=ie},46979:(W,R,t)=>{t.d(R,{Z:()=>T});var e=t(9669),b=t.n(e),c=t(68547),P=t.n(c),n=(g,h,A)=>new Promise((L,y)=>{var u=p=>{try{s(A.next(p))}catch(x){y(x)}},d=p=>{try{s(A.throw(p))}catch(x){y(x)}},s=p=>p.done?L(p.value):Promise.resolve(p.value).then(u,d);s((A=A.apply(g,h)).next())});const O=b().create({baseURL:""});O.interceptors.request.use(g=>n(void 0,null,function*(){return g.headers={Authorization:`Bearer ${c.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},g}),g=>{Promise.reject(g)}),O.interceptors.response.use(g=>g,g=>{var h;throw((h=g.response)==null?void 0:h.status)===401&&(c.auth.clearAppStorage(),window.location.reload()),g});const T=O},89031:(W,R,t)=>{t.d(R,{be:()=>e.Z,YX:()=>P,Gc:()=>T,OB:()=>g.Z});var e=t(46979),b=t(96486);const P=h=>Object.keys(h).reduce((A,L)=>{const y=h[L].controllers,u=Object.keys(y).reduce((d,s)=>((0,b.isEmpty)(y[s])||(d[s]=y[s]),d),{});return(0,b.isEmpty)(u)||(A[L]={controllers:u}),A},{});var n=t(31498);const T=h=>`/${n.Z}/${h}`;var g=t(84757)},49066:(W,R,t)=>{t.d(R,{D:()=>P});var e=t(67294),b=t(45697),c=t(35961);const P=({children:n})=>e.createElement(c.x,{paddingLeft:10,paddingRight:10},n);P.propTypes={children:b.node.isRequired}},67838:(W,R,t)=>{t.d(R,{T:()=>i});var e=t(67294),b=t(71893),c=t(45697),P=t(72735),n=t(35961),O=t(46273);const T=a=>{const r=(0,e.useRef)(null),[o,l]=(0,e.useState)(!0),B=([S])=>{l(S.isIntersecting)};return(0,e.useEffect)(()=>{const S=r.current,w=new IntersectionObserver(B,a);return S&&w.observe(r.current),()=>{S&&w.disconnect()}},[r,a]),[r,o]},g=(a,r)=>{(0,e.useLayoutEffect)(()=>{const o=new ResizeObserver(r);return Array.isArray(a)?a.map(l=>{l.current&&o.observe(l.current)}):a.current&&o.observe(a.current),()=>{o.disconnect()}},[])};var h=Object.defineProperty,A=Object.defineProperties,L=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,s=(a,r,o)=>r in a?h(a,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[r]=o,p=(a,r)=>{for(var o in r||(r={}))u.call(r,o)&&s(a,o,r[o]);if(y)for(var o of y(r))d.call(r,o)&&s(a,o,r[o]);return a},x=(a,r)=>A(a,L(r)),V=(a,r)=>{var o={};for(var l in a)u.call(a,l)&&r.indexOf(l)<0&&(o[l]=a[l]);if(a!=null&&y)for(var l of y(a))r.indexOf(l)<0&&d.call(a,l)&&(o[l]=a[l]);return o};const H=()=>{const a=(0,e.useRef)(null),[r,o]=(0,e.useState)(null),[l,B]=T({root:null,rootMargin:"0px",threshold:0});return g(l,()=>{l.current&&o(l.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&o(a.current.getBoundingClientRect())},[a]),{containerRef:l,isVisible:B,baseHeaderLayoutRef:a,headerSize:r}},i=a=>{const{containerRef:r,isVisible:o,baseHeaderLayoutRef:l,headerSize:B}=H();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:B==null?void 0:B.height},ref:r},o&&e.createElement(F,p({ref:l},a))),!o&&e.createElement(F,x(p({},a),{sticky:!0,width:B==null?void 0:B.width})))};i.displayName="HeaderLayout";const k=(0,b.default)(n.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${a=>a.width}px;
  z-index: 4;
  box-shadow: ${({theme:a})=>a.shadows.tableShadow};
`,F=e.forwardRef((a,r)=>{var o=a,{navigationAction:l,primaryAction:B,secondaryAction:S,subtitle:w,title:G,sticky:Q,width:X}=o,Z=V(o,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const $=typeof w=="string";return Q?e.createElement(k,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:X,"data-strapi-header-sticky":!0},e.createElement(O.k,{justifyContent:"space-between"},e.createElement(O.k,null,l&&e.createElement(n.x,{paddingRight:3},l),e.createElement(n.x,null,e.createElement(P.Z,p({variant:"beta",as:"h1"},Z),G),$?e.createElement(P.Z,{variant:"pi",textColor:"neutral600"},w):w),S?e.createElement(n.x,{paddingLeft:4},S):null),e.createElement(O.k,null,B?e.createElement(n.x,{paddingLeft:2},B):void 0))):e.createElement(n.x,{ref:r,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:l?6:8,background:"neutral100","data-strapi-header":!0},l?e.createElement(n.x,{paddingBottom:2},l):null,e.createElement(O.k,{justifyContent:"space-between"},e.createElement(O.k,null,e.createElement(P.Z,p({as:"h1",variant:"alpha"},Z),G),S?e.createElement(n.x,{paddingLeft:4},S):null),B),$?e.createElement(P.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},w):w)});F.displayName="BaseHeaderLayout",F.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},F.propTypes={navigationAction:c.node,primaryAction:c.node,secondaryAction:c.node,sticky:c.bool,subtitle:c.oneOfType([c.string,c.node]),title:c.string.isRequired,width:c.number},i.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},i.propTypes={navigationAction:c.node,primaryAction:c.node,secondaryAction:c.node,subtitle:c.oneOfType([c.string,c.node]),title:c.string.isRequired}},185:(W,R,t)=>{t.d(R,{o:()=>y});var e=t(67294),b=t(45697),c=t(71893),P=Object.defineProperty,n=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,g=(u,d,s)=>d in u?P(u,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[d]=s,h=(u,d)=>{for(var s in d||(d={}))O.call(d,s)&&g(u,s,d[s]);if(n)for(var s of n(d))T.call(d,s)&&g(u,s,d[s]);return u},A=(u,d)=>{var s={};for(var p in u)O.call(u,p)&&d.indexOf(p)<0&&(s[p]=u[p]);if(u!=null&&n)for(var p of n(u))d.indexOf(p)<0&&T.call(u,p)&&(s[p]=u[p]);return s};const L=c.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,y=u=>{var d=u,{labelledBy:s}=d,p=A(d,["labelledBy"]);const x=s||"main-content-title";return e.createElement(L,h({"aria-labelledby":x,id:"main-content",tabIndex:-1},p))};y.defaultProps={labelledBy:void 0},y.propTypes={labelledBy:b.string}}}]);
