"use strict";(self.webpackChunkfull_strapi=self.webpackChunkfull_strapi||[]).push([[8418],{95972:(H,C,t)=>{t.r(C),t.d(C,{default:()=>Le});var e=t(67294),T=t(23724),d=t(97132),o=t(68547),g=t(14087),b=t(185),L=t(67838),h=t(49066),f=t(81912),a=t(89031),P=(s,i,n)=>new Promise((D,R)=>{var U=A=>{try{W(n.next(A))}catch(w){R(w)}},S=A=>{try{W(n.throw(A))}catch(w){R(w)}},W=A=>A.done?D(A.value):Promise.resolve(A.value).then(U,S);W((n=n.apply(s,i)).next())});const B=()=>P(void 0,null,function*(){const{data:s}=yield a.be.get((0,a.Gc)("email-templates"));return s}),u=s=>a.be.put((0,a.Gc)("email-templates"),s);var E=t(45697),r=t.n(E),y=t(38939),j=t(8060),K=t(79031),x=t(37909),c=t(15234),M=t(63237),O=t(72735),l=t(12028),m=t(52624),p=t(4585),v=t(30815),I=t(85018),Z=Object.defineProperty,F=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,X=(s,i,n)=>i in s?Z(s,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[i]=n,N=(s,i)=>{for(var n in i||(i={}))J.call(i,n)&&X(s,n,i[n]);if(F)for(var n of F(i))ee.call(i,n)&&X(s,n,i[n]);return s};const V=({canUpdate:s,onEditClick:i})=>{const{formatMessage:n}=(0,d.useIntl)();return e.createElement(y.i,{colCount:3,rowCount:3},e.createElement(j.h,null,e.createElement(K.Tr,null,e.createElement(x.Th,{width:"1%"},e.createElement(M.T,null,n({id:(0,a.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(x.Th,null,e.createElement(O.Z,{variant:"sigma",textColor:"neutral600"},n({id:(0,a.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(x.Th,{width:"1%"},e.createElement(M.T,null,n({id:(0,a.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(c.p,null,e.createElement(K.Tr,N({},(0,o.onRowClick)({fn:()=>i("reset_password")})),e.createElement(x.Td,null,e.createElement(m.J,null,e.createElement(v.Z,{"aria-label":n({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(x.Td,null,e.createElement(O.Z,null,n({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(x.Td,N({},o.stopPropagation),e.createElement(l.h,{onClick:()=>i("reset_password"),label:n({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(p.Z,null)}))),e.createElement(K.Tr,N({},(0,o.onRowClick)({fn:()=>i("email_confirmation")})),e.createElement(x.Td,null,e.createElement(m.J,null,e.createElement(I.Z,{"aria-label":n({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(x.Td,null,e.createElement(O.Z,null,n({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(x.Td,N({},o.stopPropagation),e.createElement(l.h,{onClick:()=>i("email_confirmation"),label:n({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(p.Z,null)})))))};V.propTypes={canUpdate:r().bool.isRequired,onEditClick:r().func.isRequired};const de=V;var me=t(80831),ce=t(42866),pe=t(24969),ue=t(59946),Ee=t(36856),ve=t(11276),G=t(74571),le=t(29728),te=t(2407),fe=t(64256),$=t(53209);const ye=$.Ry().shape({options:$.Ry().shape({from:$.Ry().shape({name:$.Z_().required(o.translatedErrors.required),email:$.Z_().email(o.translatedErrors.email).required(o.translatedErrors.required)}).required(),response_email:$.Z_().email(o.translatedErrors.email),object:$.Z_().required(o.translatedErrors.required),message:$.Z_().required(o.translatedErrors.required)}).required(o.translatedErrors.required)}),ne=({template:s,onToggle:i,onSubmit:n})=>{const{formatMessage:D}=(0,d.useIntl)();return e.createElement(ce.P,{onClose:i,labelledBy:`${D({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${D({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(pe.x,null,e.createElement(te.O,{label:`${D({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${D({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(te.$,null,D({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(te.$,null,D({id:(0,a.OB)(s.display),defaultMessage:s.display})))),e.createElement(me.Formik,{onSubmit:n,initialValues:s,validateOnChange:!1,validationSchema:ye,enableReinitialize:!0},({errors:R,values:U,handleChange:S,isSubmitting:W})=>{var A,w,Q,Y,k,_,q;return e.createElement(o.Form,null,e.createElement(ue.f,null,e.createElement(ve.r,{gap:5},e.createElement(G.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:S,value:U.options.from.name,error:(w=(A=R==null?void 0:R.options)==null?void 0:A.from)==null?void 0:w.name,type:"text"})),e.createElement(G.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:S,value:U.options.from.email,error:(Y=(Q=R==null?void 0:R.options)==null?void 0:Q.from)==null?void 0:Y.email,type:"text"})),e.createElement(G.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:S,value:U.options.response_email,error:(k=R==null?void 0:R.options)==null?void 0:k.response_email,type:"text"})),e.createElement(G.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:S,value:U.options.object,error:(_=R==null?void 0:R.options)==null?void 0:_.object,type:"text"})),e.createElement(G.P,{col:12,s:12},e.createElement(fe.g,{label:D({id:(0,a.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),name:"options.message",onChange:S,value:U.options.message,error:((q=R==null?void 0:R.options)==null?void 0:q.message)&&D({id:R.options.message,defaultMessage:R.options.message})})))),e.createElement(Ee.m,{startActions:e.createElement(le.z,{onClick:i,variant:"tertiary"},"Cancel"),endActions:e.createElement(le.z,{loading:W,type:"submit"},"Finish")}))}))};ne.propTypes={template:r().shape({display:r().string,icon:r().string,options:r().shape({from:r().shape({name:r().string,email:r().string}),message:r().string,object:r().string,response_email:r().string})}).isRequired,onSubmit:r().func.isRequired,onToggle:r().func.isRequired};const ge=ne;var Oe=Object.defineProperty,he=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,oe=(s,i,n)=>i in s?Oe(s,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[i]=n,Me=(s,i)=>{for(var n in i||(i={}))Te.call(i,n)&&oe(s,n,i[n]);if(re)for(var n of re(i))be.call(i,n)&&oe(s,n,i[n]);return s},Be=(s,i)=>he(s,Pe(i)),Re=(s,i,n)=>new Promise((D,R)=>{var U=A=>{try{W(n.next(A))}catch(w){R(w)}},S=A=>{try{W(n.throw(A))}catch(w){R(w)}},W=A=>A.done?D(A.value):Promise.resolve(A.value).then(U,S);W((n=n.apply(s,i)).next())});const Ae=()=>e.createElement(o.CheckPagePermissions,{permissions:f.Z.readEmailTemplates},e.createElement(Ce,null)),Ce=()=>{const{formatMessage:s}=(0,d.useIntl)(),{trackUsage:i}=(0,o.useTracking)(),{notifyStatus:n}=(0,g.G)(),D=(0,o.useNotification)(),{lockApp:R,unlockApp:U}=(0,o.useOverlayBlocker)(),S=(0,e.useRef)(i),W=(0,T.useQueryClient)();(0,o.useFocusWhenNavigate)();const[A,w]=(0,e.useState)(!1),[Q,Y]=(0,e.useState)(null),k=(0,e.useMemo)(()=>({update:f.Z.updateEmailTemplates}),[]),{isLoading:_,allowedActions:{canUpdate:q}}=(0,o.useRBAC)(k),{status:De,data:se}=(0,T.useQuery)("email-templates",()=>B(),{onSuccess(){n(s({id:(0,a.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){D({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),xe=_||De!=="success",ae=()=>{w(z=>!z)},je=z=>{Y(z),ae()},ie=(0,T.useMutation)(z=>u({"email-templates":z}),{onSuccess(){return Re(this,null,function*(){yield W.invalidateQueries("email-templates"),D({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),S.current("didEditEmailTemplates"),U(),ae()})},onError(){D({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),U()},refetchActive:!0}),{isLoading:Ie}=ie,Ue=z=>{R(),S.current("willEditEmailTemplates");const Se=Be(Me({},se),{[Q]:z});ie.mutate(Se)};return xe?e.createElement(b.o,{"aria-busy":"true"},e.createElement(o.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(L.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(h.D,null,e.createElement(o.LoadingIndicatorPage,null))):e.createElement(b.o,{"aria-busy":Ie},e.createElement(o.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(L.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(h.D,null,e.createElement(de,{onEditClick:je,canUpdate:q}),A&&e.createElement(ge,{template:se[Q],onToggle:ae,onSubmit:Ue})))},Le=Ae},46979:(H,C,t)=>{t.d(C,{Z:()=>L});var e=t(9669),T=t.n(e),d=t(68547),o=t.n(d),g=(h,f,a)=>new Promise((P,B)=>{var u=y=>{try{r(a.next(y))}catch(j){B(j)}},E=y=>{try{r(a.throw(y))}catch(j){B(j)}},r=y=>y.done?P(y.value):Promise.resolve(y.value).then(u,E);r((a=a.apply(h,f)).next())});const b=T().create({baseURL:""});b.interceptors.request.use(h=>g(void 0,null,function*(){return h.headers={Authorization:`Bearer ${d.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},h}),h=>{Promise.reject(h)}),b.interceptors.response.use(h=>h,h=>{var f;throw((f=h.response)==null?void 0:f.status)===401&&(d.auth.clearAppStorage(),window.location.reload()),h});const L=b},89031:(H,C,t)=>{t.d(C,{be:()=>e.Z,YX:()=>o,Gc:()=>L,OB:()=>h.Z});var e=t(46979),T=t(96486);const o=f=>Object.keys(f).reduce((a,P)=>{const B=f[P].controllers,u=Object.keys(B).reduce((E,r)=>((0,T.isEmpty)(B[r])||(E[r]=B[r]),E),{});return(0,T.isEmpty)(u)||(a[P]={controllers:u}),a},{});var g=t(31498);const L=f=>`/${g.Z}/${f}`;var h=t(84757)},2407:(H,C,t)=>{t.d(C,{$:()=>j,O:()=>x});var e=t(67294),T=t(45697),d=t(71893),o=t(16405),g=t(72735),b=t(35961),L=t(46273),h=t(63237),f=Object.defineProperty,a=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,u=(c,M,O)=>M in c?f(c,M,{enumerable:!0,configurable:!0,writable:!0,value:O}):c[M]=O,E=(c,M)=>{for(var O in M||(M={}))P.call(M,O)&&u(c,O,M[O]);if(a)for(var O of a(M))B.call(M,O)&&u(c,O,M[O]);return c},r=(c,M)=>{var O={};for(var l in c)P.call(c,l)&&M.indexOf(l)<0&&(O[l]=c[l]);if(c!=null&&a)for(var l of a(c))M.indexOf(l)<0&&B.call(c,l)&&(O[l]=c[l]);return O};const y=(0,d.default)(L.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:c})=>c.colors.neutral500};
    }
  }
  :last-of-type ${b.x} {
    display: none;
  }
  :last-of-type ${g.Z} {
    color: ${({theme:c})=>c.colors.neutral800};
    font-weight: ${({theme:c})=>c.fontWeights.bold};
  }
`,j=({children:c})=>e.createElement(y,{inline:!0,as:"li"},e.createElement(g.Z,{variant:"pi",textColor:"neutral600"},c),e.createElement(b.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3},e.createElement(o.default,null)));j.displayName="Crumb",j.propTypes={children:T.node.isRequired};const K=T.shape({type:T.oneOf([j])}),x=c=>{var M=c,{children:O,label:l}=M,m=r(M,["children","label"]);return e.createElement(L.k,E({},m),e.createElement(h.T,null,l),e.createElement("ol",{"aria-hidden":!0},O))};x.displayName="Breadcrumbs",x.propTypes={children:T.oneOfType([T.arrayOf(K),K]).isRequired,label:T.string.isRequired}},49066:(H,C,t)=>{t.d(C,{D:()=>o});var e=t(67294),T=t(45697),d=t(35961);const o=({children:g})=>e.createElement(d.x,{paddingLeft:10,paddingRight:10},g);o.propTypes={children:T.node.isRequired}},67838:(H,C,t)=>{t.d(C,{T:()=>c});var e=t(67294),T=t(71893),d=t(45697),o=t(72735),g=t(35961),b=t(46273);const L=l=>{const m=(0,e.useRef)(null),[p,v]=(0,e.useState)(!0),I=([Z])=>{v(Z.isIntersecting)};return(0,e.useEffect)(()=>{const Z=m.current,F=new IntersectionObserver(I,l);return Z&&F.observe(m.current),()=>{Z&&F.disconnect()}},[m,l]),[m,p]},h=(l,m)=>{(0,e.useLayoutEffect)(()=>{const p=new ResizeObserver(m);return Array.isArray(l)?l.map(v=>{v.current&&p.observe(v.current)}):l.current&&p.observe(l.current),()=>{p.disconnect()}},[])};var f=Object.defineProperty,a=Object.defineProperties,P=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,r=(l,m,p)=>m in l?f(l,m,{enumerable:!0,configurable:!0,writable:!0,value:p}):l[m]=p,y=(l,m)=>{for(var p in m||(m={}))u.call(m,p)&&r(l,p,m[p]);if(B)for(var p of B(m))E.call(m,p)&&r(l,p,m[p]);return l},j=(l,m)=>a(l,P(m)),K=(l,m)=>{var p={};for(var v in l)u.call(l,v)&&m.indexOf(v)<0&&(p[v]=l[v]);if(l!=null&&B)for(var v of B(l))m.indexOf(v)<0&&E.call(l,v)&&(p[v]=l[v]);return p};const x=()=>{const l=(0,e.useRef)(null),[m,p]=(0,e.useState)(null),[v,I]=L({root:null,rootMargin:"0px",threshold:0});return h(v,()=>{v.current&&p(v.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{l.current&&p(l.current.getBoundingClientRect())},[l]),{containerRef:v,isVisible:I,baseHeaderLayoutRef:l,headerSize:m}},c=l=>{const{containerRef:m,isVisible:p,baseHeaderLayoutRef:v,headerSize:I}=x();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:I==null?void 0:I.height},ref:m},p&&e.createElement(O,y({ref:v},l))),!p&&e.createElement(O,j(y({},l),{sticky:!0,width:I==null?void 0:I.width})))};c.displayName="HeaderLayout";const M=(0,T.default)(g.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${l=>l.width}px;
  z-index: 4;
  box-shadow: ${({theme:l})=>l.shadows.tableShadow};
`,O=e.forwardRef((l,m)=>{var p=l,{navigationAction:v,primaryAction:I,secondaryAction:Z,subtitle:F,title:J,sticky:ee,width:X}=p,N=K(p,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const V=typeof F=="string";return ee?e.createElement(M,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:X,"data-strapi-header-sticky":!0},e.createElement(b.k,{justifyContent:"space-between"},e.createElement(b.k,null,v&&e.createElement(g.x,{paddingRight:3},v),e.createElement(g.x,null,e.createElement(o.Z,y({variant:"beta",as:"h1"},N),J),V?e.createElement(o.Z,{variant:"pi",textColor:"neutral600"},F):F),Z?e.createElement(g.x,{paddingLeft:4},Z):null),e.createElement(b.k,null,I?e.createElement(g.x,{paddingLeft:2},I):void 0))):e.createElement(g.x,{ref:m,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:v?6:8,background:"neutral100","data-strapi-header":!0},v?e.createElement(g.x,{paddingBottom:2},v):null,e.createElement(b.k,{justifyContent:"space-between"},e.createElement(b.k,null,e.createElement(o.Z,y({as:"h1",variant:"alpha"},N),J),Z?e.createElement(g.x,{paddingLeft:4},Z):null),I),V?e.createElement(o.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},F):F)});O.displayName="BaseHeaderLayout",O.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},O.propTypes={navigationAction:d.node,primaryAction:d.node,secondaryAction:d.node,sticky:d.bool,subtitle:d.oneOfType([d.string,d.node]),title:d.string.isRequired,width:d.number},c.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},c.propTypes={navigationAction:d.node,primaryAction:d.node,secondaryAction:d.node,subtitle:d.oneOfType([d.string,d.node]),title:d.string.isRequired}},185:(H,C,t)=>{t.d(C,{o:()=>B});var e=t(67294),T=t(45697),d=t(71893),o=Object.defineProperty,g=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,h=(u,E,r)=>E in u?o(u,E,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[E]=r,f=(u,E)=>{for(var r in E||(E={}))b.call(E,r)&&h(u,r,E[r]);if(g)for(var r of g(E))L.call(E,r)&&h(u,r,E[r]);return u},a=(u,E)=>{var r={};for(var y in u)b.call(u,y)&&E.indexOf(y)<0&&(r[y]=u[y]);if(u!=null&&g)for(var y of g(u))E.indexOf(y)<0&&L.call(u,y)&&(r[y]=u[y]);return r};const P=d.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,B=u=>{var E=u,{labelledBy:r}=E,y=a(E,["labelledBy"]);const j=r||"main-content-title";return e.createElement(P,f({"aria-labelledby":j,id:"main-content",tabIndex:-1},y))};B.defaultProps={labelledBy:void 0},B.propTypes={labelledBy:T.string}},30815:(H,C,t)=>{t.d(C,{Z:()=>h});var e=t(67294),T=Object.defineProperty,d=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,b=(f,a,P)=>a in f?T(f,a,{enumerable:!0,configurable:!0,writable:!0,value:P}):f[a]=P,L=(f,a)=>{for(var P in a||(a={}))o.call(a,P)&&b(f,P,a[P]);if(d)for(var P of d(a))g.call(a,P)&&b(f,P,a[P]);return f};function h(f){return e.createElement("svg",L({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.681 2.804A9.64 9.64 0 0011.818 2C6.398 2 2 6.48 2 12c0 5.521 4.397 10 9.818 10 2.03 0 4.011-.641 5.67-1.835a9.987 9.987 0 003.589-4.831 1.117 1.117 0 00-.664-1.418 1.086 1.086 0 00-1.393.676 7.769 7.769 0 01-2.792 3.758 7.546 7.546 0 01-4.41 1.428V4.222h.002a7.492 7.492 0 013.003.625 7.61 7.61 0 012.5 1.762l.464.551-2.986 3.042a.186.186 0 00.129.316H22V3.317a.188.188 0 00-.112-.172.179.179 0 00-.199.04l-2.355 2.4-.394-.468-.02-.02a9.791 9.791 0 00-3.239-2.293zm-3.863 1.418V2v2.222zm0 0v15.556c-4.216 0-7.636-3.484-7.636-7.778s3.42-7.777 7.636-7.778z",fill:"#212134"}))}}}]);
