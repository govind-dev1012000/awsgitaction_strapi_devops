(self.webpackChunkfull_strapi=self.webpackChunkfull_strapi||[]).push([[8853],{16098:(B,j,s)=>{"use strict";s.r(j),s.d(j,{default:()=>wn});var t=s(67294),l=s(49656),a=s(68547),d=s(31498),m=s(81912),O=s(29728),T=s(17034),R=s(67838),f=s(36989),y=s(49066),x=s(185),w=s(38939),p=s(8060),h=s(79031),v=s(37909),D=s(63237),S=s(72735),F=s(14087),W=s(96315),Z=s(97132),H=s(23724),Q=s(63852),A=s(89031),P=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const C=(n,e)=>P(void 0,null,function*(){try{const{data:r}=yield A.be.get((0,A.Gc)("roles"));return e("The roles have loaded successfully"),r}catch(r){throw n({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),L=(n,e)=>P(void 0,null,function*(){try{yield A.be.delete(`${(0,A.Gc)("roles")}/${n}`)}catch(r){e({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var U=s(45697),I=s.n(U),K=s(12028),q=s(46273),ce=s(15234),re=s(4585),ne=s(20022),se=Object.defineProperty,k=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,fe=(n,e,r)=>e in n?se(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,te=(n,e)=>{for(var r in e||(e={}))de.call(e,r)&&fe(n,r,e[r]);if(k)for(var r of k(e))ee.call(e,r)&&fe(n,r,e[r]);return n};const ue=({sortedRoles:n,canDelete:e,permissions:r,setRoleToDelete:c,onDelete:E})=>{const{formatMessage:u}=(0,Z.useIntl)(),{push:b}=(0,l.useHistory)(),[i,o]=E,g=M=>e&&!["public","authenticated"].includes(M.type),_=M=>{c(M),o(!i)},$=M=>{b(`/settings/${d.Z}/roles/${M}`)};return t.createElement(ce.p,null,n==null?void 0:n.map(M=>t.createElement(h.Tr,te({key:M.name},(0,a.onRowClick)({fn:()=>$(M.id)})),t.createElement(v.Td,{width:"20%"},t.createElement(S.Z,null,M.name)),t.createElement(v.Td,{width:"50%"},t.createElement(S.Z,null,M.description)),t.createElement(v.Td,{width:"30%"},t.createElement(S.Z,null,`${M.nb_users} ${u({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),t.createElement(v.Td,null,t.createElement(q.k,te({justifyContent:"end"},a.stopPropagation),t.createElement(a.CheckPermissions,{permissions:r.updateRole},t.createElement(K.h,{onClick:()=>$(M.id),noBorder:!0,icon:t.createElement(re.Z,null),label:u({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${M.name}`})})),g(M)&&t.createElement(a.CheckPermissions,{permissions:r.deleteRole},t.createElement(K.h,{onClick:()=>_(M.id),noBorder:!0,icon:t.createElement(ne.default,null),label:u({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${M.name}`})})))))))},ve=ue;ue.defaultProps={canDelete:!1},ue.propTypes={onDelete:I().array.isRequired,permissions:I().object.isRequired,setRoleToDelete:I().func.isRequired,sortedRoles:I().array.isRequired,canDelete:I().bool};var Ee=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const Pe=()=>{const{trackUsage:n}=(0,a.useTracking)(),{formatMessage:e}=(0,Z.useIntl)(),{push:r}=(0,l.useHistory)(),c=(0,a.useNotification)(),{notifyStatus:E}=(0,F.G)(),[{query:u}]=(0,a.useQueryParams)(),b=(u==null?void 0:u._q)||"",[i,o]=(0,t.useState)(!1),[g,_]=(0,t.useState)(!1),[$,M]=(0,t.useState)();(0,a.useFocusWhenNavigate)();const G=(0,H.useQueryClient)(),N=(0,t.useMemo)(()=>({create:m.Z.createRole,read:m.Z.readRoles,update:m.Z.updateRole,delete:m.Z.deleteRole}),[]),{isLoading:X,allowedActions:{canRead:Y,canDelete:le}}=(0,a.useRBAC)(N),{isLoading:Sn,data:{roles:Le},isFetching:jn}=(0,H.useQuery)("get-roles",()=>C(c,E),{initialData:{},enabled:Y}),Et=Sn||jn,Un=()=>{n("willCreateRole"),r(`/settings/${d.Z}/roles/new`)},Bn=()=>{o(!i)},In={roles:{id:(0,A.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,A.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},_n=e({id:"global.roles",defaultMessage:"Roles"}),Zn=(0,H.useMutation)(Gn=>L(Gn,c),{onSuccess(){return Ee(this,null,function*(){yield G.invalidateQueries("get-roles")})}}),$n=()=>Ee(void 0,null,function*(){_(!0),yield Zn.mutateAsync($),o(!i),_(!1)}),ge=(0,Q.ZP)(Le||[],b,{keys:["name","description"]}),Nn=b&&!ge.length?"search":"roles",Fn=4,Kn=((Le==null?void 0:Le.length)||0)+1;return t.createElement(T.A,null,t.createElement(a.SettingsPageTitle,{name:_n}),t.createElement(x.o,{"aria-busy":Et},t.createElement(R.T,{title:e({id:"global.roles",defaultMessage:"Roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:t.createElement(a.CheckPermissions,{permissions:m.Z.createRole},t.createElement(O.z,{onClick:Un,startIcon:t.createElement(W.default,null),size:"S"},e({id:(0,A.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),t.createElement(f.Z,{startActions:t.createElement(a.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search"})})}),t.createElement(y.D,null,!Y&&t.createElement(a.NoPermissions,null),(Et||X)&&t.createElement(a.LoadingIndicatorPage,null),Y&&ge&&(ge==null?void 0:ge.length)?t.createElement(w.i,{colCount:Fn,rowCount:Kn},t.createElement(p.h,null,t.createElement(h.Tr,null,t.createElement(v.Th,null,t.createElement(S.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),t.createElement(v.Th,null,t.createElement(S.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),t.createElement(v.Th,null,t.createElement(S.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),t.createElement(v.Th,null,t.createElement(D.T,null,e({id:"global.actions",defaultMessage:"Actions"}))))),t.createElement(ve,{sortedRoles:ge,canDelete:le,permissions:m.Z,setRoleToDelete:M,onDelete:[i,o]})):t.createElement(a.EmptyStateLayout,{content:In[Nn]})),t.createElement(a.ConfirmDialog,{isConfirmButtonLoading:g,onConfirm:$n,onToggleDialog:Bn,isOpen:i})))},Ae=()=>t.createElement(a.CheckPagePermissions,{permissions:m.Z.accessRoles},t.createElement(Pe,null));var ye=s(80831),z=s(7681),V=s(35961),he=s(16364),me=s(64256),Oe=s(67109),we=s(85018),be=s(11276),ae=s(74571),oe=s(84757),J=s(96486);const Se=(0,t.createContext)({}),je=({children:n,value:e})=>t.createElement(Se.Provider,{value:e},n),Te=()=>(0,t.useContext)(Se);je.propTypes={children:I().node.isRequired,value:I().object.isRequired};var Re=s(71893),Pt=s(35161),yt=s.n(Pt),ht=s(13217),Ot=s.n(ht);const bt=n=>{switch(n){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Rt=(0,Re.default)(V.x)`
  margin: -1px;
  border-radius: ${({theme:n})=>n.spaces[1]} 0 0 ${({theme:n})=>n.spaces[1]};
`;function xe({route:n}){const{formatMessage:e}=(0,Z.useIntl)(),{method:r,handler:c,path:E}=n,u=E?Ot()(E.split("/")):[],[b="",i=""]=c?c.split("."):[],o=bt(n.method);return t.createElement(z.K,{spacing:2},t.createElement(S.Z,{variant:"delta",as:"h3"},e({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",t.createElement("span",null,b),t.createElement(S.Z,{variant:"delta",textColor:"primary600"},".",i)),t.createElement(z.K,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0},t.createElement(Rt,{background:o.background,borderColor:o.border,padding:2},t.createElement(S.Z,{fontWeight:"bold",textColor:o.text},r)),t.createElement(V.x,{paddingLeft:2,paddingRight:2},yt()(u,g=>t.createElement(S.Z,{key:g,textColor:g.includes(":")?"neutral600":"neutral900"},"/",g)))))}xe.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},xe.propTypes={route:I().shape({handler:I().string,method:I().string,path:I().string})};const Ct=xe,Dt=()=>{const{formatMessage:n}=(0,Z.useIntl)(),{selectedAction:e,routes:r}=Te(),c=(0,J.without)(e.split("."),"controllers"),E=(0,J.get)(r,c[0]),u=c.slice(1).join("."),b=(0,J.isEmpty)(E)?[]:E.filter(i=>i.handler.endsWith(u));return t.createElement(ae.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},e?t.createElement(z.K,{spacing:2},b.map((i,o)=>t.createElement(Ct,{key:o,route:i}))):t.createElement(z.K,{spacing:2},t.createElement(S.Z,{variant:"delta",as:"h3"},n({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),t.createElement(S.Z,{as:"p",textColor:"neutral600"},n({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var At=s(48734),Tt=s(74756),xt=s(63081),Lt=s(11700),Mt=s.n(Lt);function wt(n){switch(n){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Mt()(n.replace("api::","").replace("plugin::",""))}}const St=wt;var jt=s(89734),Ue=s.n(jt),Be=s(36213),Ut=s(78114);const Ie=Re.css`
  background: ${n=>n.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Bt=(0,Re.default)(V.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${n=>n.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${n=>n.isActive&&Ie}
  &:hover {
    ${Ie}
  }
`,It=Re.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:n})=>n.colors.neutral150};
`,_e=({subCategory:n})=>{const{formatMessage:e}=(0,Z.useIntl)(),{onChange:r,onChangeSelectAll:c,onSelectedAction:E,selectedAction:u,modifiedData:b}=Te(),i=(0,t.useMemo)(()=>(0,J.get)(b,n.name,{}),[b,n]),o=(0,t.useMemo)(()=>Object.values(i).every(M=>M.enabled===!0),[i]),g=(0,t.useMemo)(()=>Object.values(i).some(M=>M.enabled===!0)&&!o,[i,o]),_=(0,t.useCallback)(({target:{name:M}})=>{c({target:{name:M,value:!o}})},[o,c]),$=(0,t.useCallback)(M=>u===M,[u]);return t.createElement(V.x,null,t.createElement(q.k,{justifyContent:"space-between",alignItems:"center"},t.createElement(V.x,{paddingRight:4},t.createElement(S.Z,{variant:"sigma",textColor:"neutral600"},n.label)),t.createElement(It,null),t.createElement(V.x,{paddingLeft:4},t.createElement(Be.X,{name:n.name,value:o,onValueChange:M=>_({target:{name:n.name,value:M}}),indeterminate:g},e({id:"app.utils.select-all",defaultMessage:"Select all"})))),t.createElement(q.k,{paddingTop:6,paddingBottom:6},t.createElement(be.r,{gap:2,style:{flex:1}},n.actions.map(M=>{const G=`${M.name}.enabled`;return t.createElement(ae.P,{col:6,key:M.name},t.createElement(Bt,{isActive:$(M.name),padding:2,hasRadius:!0},t.createElement(Be.X,{value:(0,J.get)(b,G,!1),name:G,onValueChange:N=>r({target:{name:G,value:N}})},M.label),t.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>E(M.name),style:{display:"inline-flex",alignItems:"center"}},t.createElement(Ut.Z,null))))}))))};_e.propTypes={subCategory:I().object.isRequired};const _t=_e;var Zt=Object.defineProperty,$t=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,$e=(n,e,r)=>e in n?Zt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Gt=(n,e)=>{for(var r in e||(e={}))Ft.call(e,r)&&$e(n,r,e[r]);if(Ze)for(var r of Ze(e))Kt.call(e,r)&&$e(n,r,e[r]);return n},Wt=(n,e)=>$t(n,Nt(e));const Ne=({name:n,permissions:e})=>{const r=(0,t.useMemo)(()=>Ue()(Object.values(e.controllers).reduce((c,E,u)=>{const b=`${n}.controllers.${Object.keys(e.controllers)[u]}`,i=Ue()(Object.keys(E).reduce((o,g)=>[...o,Wt(Gt({},E[g]),{label:g,name:`${b}.${g}`})],[]),"label");return[...c,{actions:i,label:Object.keys(e.controllers)[u],name:b}]},[]),"label"),[n,e]);return t.createElement(V.x,{padding:6},r.map(c=>t.createElement(_t,{key:c.name,subCategory:c})))};Ne.propTypes={name:I().string.isRequired,permissions:I().object.isRequired};const zt=Ne;var Vt=Object.defineProperty,kt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Ke=(n,e,r)=>e in n?Vt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Yt=(n,e)=>{for(var r in e||(e={}))Qt.call(e,r)&&Ke(n,r,e[r]);if(Fe)for(var r of Fe(e))Xt.call(e,r)&&Ke(n,r,e[r]);return n},Jt=(n,e)=>kt(n,Ht(e));const qt=(n,e)=>{const r=Object.keys(e).sort().map(c=>({name:c,isOpen:!1}));return Jt(Yt({},n),{collapses:r})};var Ce=s(60612),er=Object.defineProperty,tr=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,nr=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,We=(n,e,r)=>e in n?er(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ze=(n,e)=>{for(var r in e||(e={}))nr.call(e,r)&&We(n,r,e[r]);if(Ge)for(var r of Ge(e))sr.call(e,r)&&We(n,r,e[r]);return n},Ve=(n,e)=>tr(n,rr(e));const ar={collapses:[]},or=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"TOGGLE_COLLAPSE":{r.collapses=n.collapses.map((c,E)=>E===e.index?Ve(ze({},c),{isOpen:!c.isOpen}):Ve(ze({},c),{isOpen:!1}));break}default:return r}}),ir=()=>{const{modifiedData:n}=Te(),{formatMessage:e}=(0,Z.useIntl)(),[{collapses:r},c]=(0,t.useReducer)(or,ar,u=>qt(u,n)),E=u=>c({type:"TOGGLE_COLLAPSE",index:u});return t.createElement(z.K,{spacing:1},r.map((u,b)=>t.createElement(At.U,{expanded:u.isOpen,onToggle:()=>E(b),key:u.name,variant:b%2===0?"secondary":void 0},t.createElement(Tt.B,{title:St(u.name),description:e({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:u.name}),variant:b%2?"primary":"secondary"}),t.createElement(xt.v,null,t.createElement(V.x,null,t.createElement(zt,{permissions:n[u.name],name:u.name}))))))};var lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,He=(n,e,r)=>e in n?lr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,mr=(n,e)=>{for(var r in e||(e={}))ur.call(e,r)&&He(n,r,e[r]);if(ke)for(var r of ke(e))pr.call(e,r)&&He(n,r,e[r]);return n},gr=(n,e)=>cr(n,dr(e));const fr={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},vr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"ON_CHANGE":{const c=e.keys.length,E=e.keys[c-1]==="enabled";if(e.value&&E){const u=(0,J.take)(e.keys,c-1).join(".");r.selectedAction=u}(0,J.set)(r,["modifiedData",...e.keys],e.value);break}case"ON_CHANGE_SELECT_ALL":{const c=["modifiedData",...e.keys],E=(0,J.get)(n,c,{}),u=Object.keys(E).reduce((b,i)=>(b[i]=gr(mr({},E[i]),{enabled:e.value}),b),{});(0,J.set)(r,c,u);break}case"ON_RESET":{r.modifiedData=n.initialData;break}case"ON_SUBMIT_SUCCEEDED":{r.initialData=n.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:c}=e;r.selectedAction=c===n.selectedAction?"":c;break}default:return r}});var Er=Object.defineProperty,Pr=Object.defineProperties,yr=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Xe=(n,e,r)=>e in n?Er(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,br=(n,e)=>{for(var r in e||(e={}))hr.call(e,r)&&Xe(n,r,e[r]);if(Qe)for(var r of Qe(e))Or.call(e,r)&&Xe(n,r,e[r]);return n},Rr=(n,e)=>Pr(n,yr(e));const Cr=(n,e,r)=>Rr(br({},n),{initialData:e,modifiedData:e,routes:r});var Dr=Object.defineProperty,Ar=Object.defineProperties,Tr=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Je=(n,e,r)=>e in n?Dr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Mr=(n,e)=>{for(var r in e||(e={}))xr.call(e,r)&&Je(n,r,e[r]);if(Ye)for(var r of Ye(e))Lr.call(e,r)&&Je(n,r,e[r]);return n},wr=(n,e)=>Ar(n,Tr(e));const qe=(0,t.forwardRef)(({permissions:n,routes:e},r)=>{const{formatMessage:c}=(0,Z.useIntl)(),[E,u]=(0,t.useReducer)(vr,fr,_=>Cr(_,n,e));(0,t.useImperativeHandle)(r,()=>({getPermissions(){return{permissions:E.modifiedData}},resetForm(){u({type:"ON_RESET"})},setFormAfterSubmit(){u({type:"ON_SUBMIT_SUCCEEDED"})}}));const b=({target:{name:_,value:$}})=>u({type:"ON_CHANGE",keys:_.split("."),value:$==="empty__string_value"?"":$}),i=({target:{name:_,value:$}})=>u({type:"ON_CHANGE_SELECT_ALL",keys:_.split("."),value:$}),o=_=>u({type:"SELECT_ACTION",actionToSelect:_}),g=wr(Mr({},E),{onChange:b,onChangeSelectAll:i,onSelectedAction:o});return t.createElement(je,{value:g},t.createElement(be.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},t.createElement(ae.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(z.K,{spacing:6},t.createElement(z.K,{spacing:2},t.createElement(S.Z,{variant:"delta",as:"h2"},c({id:(0,oe.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),t.createElement(S.Z,{as:"p",textColor:"neutral600"},c({id:(0,oe.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),t.createElement(ir,null))),t.createElement(Dt,null)))});qe.propTypes={permissions:I().object.isRequired,routes:I().object.isRequired};const et=(0,t.memo)(qe),Yn={isLoading:!0,modifiedData:{}},Jn=(n,e)=>produce(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.modifiedData={};break}case"GET_DATA_SUCCEEDED":{r.isLoading=!1,r.modifiedData=e.data;break}case"GET_DATA_ERROR":{r.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{r.modifiedData=e.data;break}default:return r}}),qn=null;var Sr=s(25108),jr=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const es=(n,e)=>{const{isLoading:r,allowedActions:c}=useRBAC(e),[{isLoading:E,modifiedData:u},b]=useReducer(reducer,initialState),i=useNotification(),o=useRef(!0),g=new AbortController,{signal:_}=g;useEffect(()=>(r||(()=>jr(void 0,null,function*(){try{b({type:"GET_DATA"});const G=yield request(getRequestURL(n),{method:"GET",signal:_});b({type:"GET_DATA_SUCCEEDED",data:G})}catch(G){o.current&&(b({type:"GET_DATA_ERROR"}),Sr.error(G),i({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{g.abort(),o.current=!1}),[r,n]);const $=useCallback(M=>{b({type:"ON_SUBMIT_SUCCEEDED",data:M})},[]);return{allowedActions:c,dispatchSubmitSucceeded:$,isLoading:E,isLoadingForPermissions:r,modifiedData:u}},ts=null;var Ur=Object.defineProperty,Br=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,rt=(n,e,r)=>e in n?Ur(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,$r=(n,e)=>{for(var r in e||(e={}))_r.call(e,r)&&rt(n,r,e[r]);if(tt)for(var r of tt(e))Zr.call(e,r)&&rt(n,r,e[r]);return n},Nr=(n,e)=>Br(n,Ir(e));const rs=(n,e)=>Nr($r({},n),{isLoading:e}),ns=null,ss={roles:[],isLoading:!0},as=(n,e)=>produce(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.roles=[];break}case"GET_DATA_SUCCEEDED":{r.roles=e.data,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}}),os=null;var Fr=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const is=(n=!0)=>{const[{roles:e,isLoading:r},c]=useReducer(reducer,initialState,()=>init(initialState,n)),E=useNotification(),u=useRef(!0),b=new AbortController,{signal:i}=b;useEffect(()=>(n&&o(),()=>{b.abort(),u.current=!1}),[n]);const o=()=>Fr(void 0,null,function*(){try{c({type:"GET_DATA"});const{roles:g}=yield request(`/${pluginId}/roles`,{method:"GET",signal:i});c({type:"GET_DATA_SUCCEEDED",data:g})}catch(g){const _=get(g,["response","payload","message"],"An error occured");u.current&&(c({type:"GET_DATA_ERROR"}),_!=="Forbidden"&&E({type:"warning",message:_}))}});return{roles:e,isLoading:r,getData:o}},ls=null;var Kr=Object.defineProperty,Gr=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,st=(n,e,r)=>e in n?Kr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,kr=(n,e)=>{for(var r in e||(e={}))zr.call(e,r)&&st(n,r,e[r]);if(nt)for(var r of nt(e))Vr.call(e,r)&&st(n,r,e[r]);return n},Hr=(n,e)=>Gr(n,Wr(e));const Qr=(n,e)=>Hr(kr({},n),{isLoading:e});var De=s(46979);const at={permissions:{},routes:{},isLoading:!0},Xr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.permissions={},r.routes={};break}case"GET_DATA_SUCCEEDED":{r.permissions=e.permissions,r.routes=e.routes,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}});var ot=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const it=(n=!0)=>{const e=(0,a.useNotification)(),[{permissions:r,routes:c,isLoading:E},u]=(0,t.useReducer)(Xr,at,()=>Qr(at,n)),b=(0,t.useCallback)(()=>ot(void 0,null,function*(){try{u({type:"GET_DATA"});const[{permissions:i},{routes:o}]=yield Promise.all([`/${d.Z}/permissions`,`/${d.Z}/routes`].map(g=>ot(void 0,null,function*(){return(yield De.Z.get(g)).data})));u({type:"GET_DATA_SUCCEEDED",permissions:(0,A.YX)(i),routes:o})}catch(i){const o=(0,J.get)(i,["response","payload","message"],"An error occured");u({type:"GET_DATA_ERROR"}),o!=="Forbidden"&&e({type:"warning",message:o})}}),[e]);return(0,t.useEffect)(()=>{n&&b()},[b,n]),{permissions:r,routes:c,getData:b,isLoading:E}},Yr={role:{},isLoading:!0},Jr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"GET_DATA_SUCCEEDED":{r.role=e.role,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{r.role.name=e.name,r.role.description=e.description;break}default:return r}});var qr=s(25108),en=Object.defineProperty,tn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,ct=(n,e,r)=>e in n?en(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,dt=(n,e)=>{for(var r in e||(e={}))nn.call(e,r)&&ct(n,r,e[r]);if(lt)for(var r of lt(e))sn.call(e,r)&&ct(n,r,e[r]);return n},an=(n,e)=>tn(n,rn(e)),on=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const ln=n=>{const[e,r]=(0,t.useReducer)(Jr,Yr),c=(0,a.useNotification)(),E=(0,t.useRef)(null);(0,t.useEffect)(()=>(E.current=!0,n?u(n):r({type:"GET_DATA_SUCCEEDED",role:{}}),()=>E.current=!1),[n]);const u=i=>on(void 0,null,function*(){try{const{data:{role:o}}=yield De.Z.get(`/${d.Z}/roles/${i}`);E.current&&r({type:"GET_DATA_SUCCEEDED",role:o})}catch(o){qr.error(o),r({type:"GET_DATA_ERROR"}),c({type:"warning",message:{id:"notification.error"}})}}),b=(0,t.useCallback)(i=>{r(dt({type:"ON_SUBMIT_SUCCEEDED"},i))},[]);return an(dt({},e),{onSubmitSucceeded:b})};var ie=s(53209);const cn=ie.Ry().shape({name:ie.Z_().required(a.translatedErrors.required),description:ie.Z_().required(a.translatedErrors.required)});var dn=s(25108),un=Object.defineProperty,pn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,pt=(n,e,r)=>e in n?un(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,mt=(n,e)=>{for(var r in e||(e={}))gn.call(e,r)&&pt(n,r,e[r]);if(ut)for(var r of ut(e))fn.call(e,r)&&pt(n,r,e[r]);return n},vn=(n,e)=>pn(n,mn(e)),En=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const Pn=()=>{const{formatMessage:n}=(0,Z.useIntl)(),[e,r]=(0,t.useState)(!1),c=(0,a.useNotification)(),{lockApp:E,unlockApp:u}=(0,a.useOverlayBlocker)(),{params:{id:b}}=(0,l.useRouteMatch)(`/settings/${d.Z}/roles/:id`),{isLoading:i,routes:o}=it(),{role:g,onSubmitSucceeded:_,isLoading:$}=ln(b),M=(0,t.useRef)(),G=N=>En(void 0,null,function*(){E(),r(!0);try{const X=M.current.getPermissions();yield De.Z.put(`/${d.Z}/roles/${b}`,vn(mt(mt({},N),X),{users:[]})),_({name:N.name,description:N.description}),c({type:"success",message:{id:(0,oe.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(X){dn.error(X),c({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),u()});return $?t.createElement(a.LoadingIndicatorPage,null):t.createElement(x.o,null,t.createElement(a.SettingsPageTitle,{name:"Roles"}),t.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:g.name,description:g.description},onSubmit:G,validationSchema:cn},({handleSubmit:N,values:X,handleChange:Y,errors:le})=>t.createElement(a.Form,{noValidate:!0,onSubmit:N},t.createElement(R.T,{primaryAction:!i&&t.createElement(O.z,{disabled:g.code==="strapi-super-admin",type:"submit",loading:e,startIcon:t.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:g.name,subtitle:g.description,navigationAction:t.createElement(a.Link,{startIcon:t.createElement(Oe.Z,null),to:"/settings/users-permissions/roles"},n({id:"global.back",defaultMessage:"Back"}))}),t.createElement(y.D,null,t.createElement(z.K,{spacing:7},t.createElement(V.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(z.K,{spacing:4},t.createElement(S.Z,{variant:"delta",as:"h2"},n({id:(0,oe.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),t.createElement(be.r,{gap:4},t.createElement(ae.P,{col:6},t.createElement(he.o,{name:"name",value:X.name||"",onChange:Y,label:n({id:"global.name",defaultMessage:"Name"}),error:le.name?n({id:le.name,defaultMessage:"Invalid value"}):null})),t.createElement(ae.P,{col:6},t.createElement(me.g,{name:"description",value:X.description||"",onChange:Y,label:n({id:"global.description",defaultMessage:"Description"}),error:le.description?n({id:le.description,defaultMessage:"Invalid value"}):null}))))),!i&&t.createElement(et,{ref:M,permissions:g.permissions,routes:o}))))))},yn=()=>t.createElement(a.CheckPagePermissions,{permissions:m.Z.updateRole},t.createElement(Pn,null)),hn=ie.Ry().shape({name:ie.Z_().required(a.translatedErrors.required),description:ie.Z_().required(a.translatedErrors.required)});var On=s(25108),bn=Object.defineProperty,Rn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,Dn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,ft=(n,e,r)=>e in n?bn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,vt=(n,e)=>{for(var r in e||(e={}))Dn.call(e,r)&&ft(n,r,e[r]);if(gt)for(var r of gt(e))An.call(e,r)&&ft(n,r,e[r]);return n},Tn=(n,e)=>Rn(n,Cn(e)),xn=(n,e,r)=>new Promise((c,E)=>{var u=o=>{try{i(r.next(o))}catch(g){E(g)}},b=o=>{try{i(r.throw(o))}catch(g){E(g)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,b);i((r=r.apply(n,e)).next())});const Ln=()=>{const{formatMessage:n}=(0,Z.useIntl)(),[e,r]=(0,t.useState)(!1),c=(0,a.useNotification)(),{goBack:E}=(0,l.useHistory)(),{lockApp:u,unlockApp:b}=(0,a.useOverlayBlocker)(),{isLoading:i,permissions:o,routes:g}=it(),{trackUsage:_}=(0,a.useTracking)(),$=(0,t.useRef)(),M=G=>xn(void 0,null,function*(){u(),r(!0);try{const N=$.current.getPermissions();yield De.Z.post(`/${d.Z}/roles`,Tn(vt(vt({},G),N),{users:[]})),_("didCreateRole"),c({type:"success",message:{id:(0,oe.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),E()}catch(N){On.error(N),c({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),b()});return t.createElement(x.o,null,t.createElement(a.SettingsPageTitle,{name:"Roles"}),t.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:M,validationSchema:hn},({handleSubmit:G,values:N,handleChange:X,errors:Y})=>t.createElement(a.Form,{noValidate:!0,onSubmit:G},t.createElement(R.T,{primaryAction:!i&&t.createElement(O.z,{type:"submit",loading:e,startIcon:t.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:n({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:n({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),t.createElement(y.D,null,t.createElement(z.K,{spacing:7},t.createElement(V.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(z.K,{spacing:4},t.createElement(S.Z,{variant:"delta",as:"h2"},n({id:(0,oe.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),t.createElement(be.r,{gap:4},t.createElement(ae.P,{col:6},t.createElement(he.o,{name:"name",value:N.name||"",onChange:X,label:n({id:"global.name",defaultMessage:"Name"}),error:Y.name?n({id:Y.name,defaultMessage:"Invalid value"}):null})),t.createElement(ae.P,{col:6},t.createElement(me.g,{name:"description",value:N.description||"",onChange:X,label:n({id:"global.description",defaultMessage:"Description"}),error:Y.description?n({id:Y.description,defaultMessage:"Invalid value"}):null}))))),!i&&t.createElement(et,{ref:$,permissions:o,routes:g}))))))},Mn=()=>t.createElement(a.CheckPagePermissions,{permissions:m.Z.createRole},t.createElement(Ln,null)),wn=()=>t.createElement(a.CheckPagePermissions,{permissions:m.Z.accessRoles},t.createElement(l.Switch,null,t.createElement(l.Route,{path:`/settings/${d.Z}/roles/new`,component:Mn,exact:!0}),t.createElement(l.Route,{path:`/settings/${d.Z}/roles/:id`,component:yn,exact:!0}),t.createElement(l.Route,{path:`/settings/${d.Z}/roles`,component:Ae,exact:!0}),t.createElement(l.Route,{path:"",component:a.NotFound})))},46979:(B,j,s)=>{"use strict";s.d(j,{Z:()=>T});var t=s(9669),l=s.n(t),a=s(68547),d=s.n(a),m=(R,f,y)=>new Promise((x,w)=>{var p=D=>{try{v(y.next(D))}catch(S){w(S)}},h=D=>{try{v(y.throw(D))}catch(S){w(S)}},v=D=>D.done?x(D.value):Promise.resolve(D.value).then(p,h);v((y=y.apply(R,f)).next())});const O=l().create({baseURL:""});O.interceptors.request.use(R=>m(void 0,null,function*(){return R.headers={Authorization:`Bearer ${a.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},R}),R=>{Promise.reject(R)}),O.interceptors.response.use(R=>R,R=>{var f;throw((f=R.response)==null?void 0:f.status)===401&&(a.auth.clearAppStorage(),window.location.reload()),R});const T=O},89031:(B,j,s)=>{"use strict";s.d(j,{be:()=>t.Z,YX:()=>d,Gc:()=>T,OB:()=>R.Z});var t=s(46979),l=s(96486);const d=f=>Object.keys(f).reduce((y,x)=>{const w=f[x].controllers,p=Object.keys(w).reduce((h,v)=>((0,l.isEmpty)(w[v])||(h[v]=w[v]),h),{});return(0,l.isEmpty)(p)||(y[x]={controllers:p}),y},{});var m=s(31498);const T=f=>`/${m.Z}/${f}`;var R=s(84757)},89881:(B,j,s)=>{var t=s(47816),l=s(99291),a=l(t);B.exports=a},69199:(B,j,s)=>{var t=s(89881),l=s(98612);function a(d,m){var O=-1,T=l(d)?Array(d.length):[];return t(d,function(R,f,y){T[++O]=m(R,f,y)}),T}B.exports=a},82689:(B,j,s)=>{var t=s(29932),l=s(97786),a=s(67206),d=s(69199),m=s(71131),O=s(7518),T=s(85022),R=s(6557),f=s(1469);function y(x,w,p){w.length?w=t(w,function(D){return f(D)?function(S){return l(S,D.length===1?D[0]:D)}:D}):w=[R];var h=-1;w=t(w,O(a));var v=d(x,function(D,S,F){var W=t(w,function(Z){return Z(D)});return{criteria:W,index:++h,value:D}});return m(v,function(D,S){return T(D,S,p)})}B.exports=y},71131:B=>{function j(s,t){var l=s.length;for(s.sort(t);l--;)s[l]=s[l].value;return s}B.exports=j},26393:(B,j,s)=>{var t=s(33448);function l(a,d){if(a!==d){var m=a!==void 0,O=a===null,T=a===a,R=t(a),f=d!==void 0,y=d===null,x=d===d,w=t(d);if(!y&&!w&&!R&&a>d||R&&f&&x&&!y&&!w||O&&f&&x||!m&&x||!T)return 1;if(!O&&!R&&!w&&a<d||w&&m&&T&&!O&&!R||y&&m&&T||!f&&T||!x)return-1}return 0}B.exports=l},85022:(B,j,s)=>{var t=s(26393);function l(a,d,m){for(var O=-1,T=a.criteria,R=d.criteria,f=T.length,y=m.length;++O<f;){var x=t(T[O],R[O]);if(x){if(O>=y)return x;var w=m[O];return x*(w=="desc"?-1:1)}}return a.index-d.index}B.exports=l},99291:(B,j,s)=>{var t=s(98612);function l(a,d){return function(m,O){if(m==null)return m;if(!t(m))return a(m,O);for(var T=m.length,R=d?T:-1,f=Object(m);(d?R--:++R<T)&&O(f[R],R,f)!==!1;);return m}}B.exports=l},35161:(B,j,s)=>{var t=s(29932),l=s(67206),a=s(69199),d=s(1469);function m(O,T){var R=d(O)?t:a;return R(O,l(T,3))}B.exports=m},89734:(B,j,s)=>{var t=s(21078),l=s(82689),a=s(5976),d=s(16612),m=a(function(O,T){if(O==null)return[];var R=T.length;return R>1&&d(O,T[0],T[1])?T=[]:R>2&&d(T[0],T[1],T[2])&&(T=[T[0]]),l(O,t(T,1),[])});B.exports=m},13217:(B,j,s)=>{var t=s(14259);function l(a){var d=a==null?0:a.length;return d?t(a,1,d):[]}B.exports=l},48734:(B,j,s)=>{"use strict";s.d(j,{U:()=>w,y:()=>y});var t=s(67294),l=s(45697),a=s(71893),d=s(72735),m=s(13819),O=s(41762),T=s(35961),R=s(46273);const f=({theme:p,expanded:h,variant:v,disabled:D,error:S})=>S?`1px solid ${p.colors.danger600} !important`:D?`1px solid ${p.colors.neutral150}`:h?`1px solid ${p.colors.primary600}`:v==="primary"?`1px solid ${p.colors.neutral0}`:`1px solid ${p.colors.neutral100}`,y=(0,a.default)(d.Z)``,x=(0,a.default)(T.x)`
  border: ${f};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:p})=>p.colors.primary600};

    ${y} {
      color: ${({theme:p,expanded:h})=>h?void 0:p.colors.primary700};
    }

    ${d.Z} {
      color: ${({theme:p,expanded:h})=>h?void 0:p.colors.primary600};
    }

    & > ${R.k} {
      background: ${({theme:p})=>p.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:p})=>p.colors.primary200};
    }
  }
`,w=({children:p,expanded:h,id:v,size:D,variant:S,disabled:F,error:W,hasErrorMessage:Z,onToggle:H,toggle:Q})=>{const A=(0,O.M)("accordion",v);return t.createElement(m.S.Provider,{value:{expanded:h,onToggle:H,toggle:Q,id:A,size:D,variant:S,disabled:F}},t.createElement(x,{"data-strapi-expanded":h,disabled:F,"aria-disabled":F,expanded:h,hasRadius:!0,variant:S,error:W},p),W&&Z&&t.createElement(T.x,{paddingTop:1},t.createElement(d.Z,{variant:"pi",textColor:"danger600"},W)))};w.defaultProps={disabled:!1,error:void 0,expanded:!1,hasErrorMessage:!0,id:void 0,toggle:!1,size:"M",variant:"primary",onToggle:void 0,toggle:void 0},w.propTypes={children:l.node.isRequired,disabled:l.bool,error:l.string,expanded:l.bool,hasErrorMessage:l.bool,id:l.string,onToggle:l.func,size:l.oneOf(["S","M"]),toggle:l.func,variant:l.oneOf(["primary","secondary"])}},63081:(B,j,s)=>{"use strict";s.d(j,{v:()=>w});var t=s(67294),l=s(45697),a=s(13819),d=s(35961),m=Object.defineProperty,O=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,f=(p,h,v)=>h in p?m(p,h,{enumerable:!0,configurable:!0,writable:!0,value:v}):p[h]=v,y=(p,h)=>{for(var v in h||(h={}))T.call(h,v)&&f(p,v,h[v]);if(O)for(var v of O(h))R.call(h,v)&&f(p,v,h[v]);return p},x=(p,h)=>{var v={};for(var D in p)T.call(p,D)&&h.indexOf(D)<0&&(v[D]=p[D]);if(p!=null&&O)for(var D of O(p))h.indexOf(D)<0&&R.call(p,D)&&(v[D]=p[D]);return v};const w=p=>{var h=p,{children:v}=h,D=x(h,["children"]);const{expanded:S,id:F}=(0,a.A)();if(!S)return null;const W=`accordion-content-${F}`,Z=`accordion-label-${F}`,H=`accordion-desc-${F}`;return t.createElement(d.x,y({role:"region",id:W,"aria-labelledby":Z,"aria-describedby":H},D),v)};w.propTypes={children:l.node.isRequired}},13819:(B,j,s)=>{"use strict";s.d(j,{A:()=>a,S:()=>l});var t=s(67294);const l=(0,t.createContext)(),a=()=>(0,t.useContext)(l)},74756:(B,j,s)=>{"use strict";s.d(j,{B:()=>A});var t=s(67294),l=s(45697),a=s(12645),d=s(71893),m=s(39785),O=s(72735),T=s(48734),R=s(13819),f=s(46273),y=s(7681),x=s(52624);const w=({expanded:P,disabled:C,variant:L})=>{let U;return P?U="primary100":C?U="neutral150":L==="primary"?U="neutral0":U="neutral100",U};var p=s(25108),h=Object.defineProperty,v=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,F=(P,C,L)=>C in P?h(P,C,{enumerable:!0,configurable:!0,writable:!0,value:L}):P[C]=L,W=(P,C)=>{for(var L in C||(C={}))D.call(C,L)&&F(P,L,C[L]);if(v)for(var L of v(C))S.call(C,L)&&F(P,L,C[L]);return P},Z=(P,C)=>{var L={};for(var U in P)D.call(P,U)&&C.indexOf(U)<0&&(L[U]=P[U]);if(P!=null&&v)for(var U of v(P))C.indexOf(U)<0&&S.call(P,U)&&(L[U]=P[U]);return L};const H=(0,d.default)(m.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:P,expanded:C})=>C?P.colors.primary600:P.colors.neutral500};
    }
  }
`,Q=(0,d.default)(f.k)`
  min-height: ${({theme:P,size:C})=>P.sizes.accordions[C]};
  border-radius: ${({theme:P,expanded:C})=>C?`${P.borderRadius} ${P.borderRadius} 0 0`:P.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:P})=>P.colors.primary600};
      }
    }
  }
`,A=P=>{var C=P,{title:L,description:U,as:I,togglePosition:K,action:q}=C,ce=Z(C,["title","description","as","togglePosition","action"]);const re=(0,t.useRef)(null),{onToggle:ne,toggle:se,expanded:k,id:de,size:ee,variant:fe,disabled:te}=(0,R.A)(),ue=`accordion-content-${de}`,ve=`accordion-label-${de}`,Ee=`accordion-desc-${de}`,pe=ee==="M"?6:4,Pe=ee==="M"?pe:pe-2,Me=w({expanded:k,disabled:te,variant:fe}),Ae={as:I,fontWeight:ee==="S"?"bold":void 0,id:ve,textColor:k?"primary600":"neutral700",ellipsis:!0,variant:ee==="M"?"delta":void 0},ye=k?"primary600":"neutral600",z=k?"primary200":"neutral200",V=ee==="M"?`${32/16}rem`:`${24/16}rem`,he=()=>{te||(se&&!ne?(p.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),se()):ne())},me=t.createElement(f.k,{justifyContent:"center",borderRadius:"50%",height:V,width:V,transform:k?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,disabled:te,"aria-hidden":!0,as:"span",background:z,cursor:te?"not-allowed":"pointer",onClick:()=>{var Oe;return(Oe=re==null?void 0:re.current)==null?void 0:Oe.click()},shrink:0},t.createElement(x.J,{as:a.default,width:ee==="M"?`${11/16}rem`:`${8/16}rem`,color:k?"primary600":"neutral600"}));return t.createElement(Q,{paddingBottom:Pe,paddingLeft:pe,paddingRight:pe,paddingTop:Pe,background:Me,expanded:k,size:ee,justifyContent:"space-between",cursor:te?"not-allowed":""},t.createElement(y.K,{horizontal:!0,spacing:3,flex:1,maxWidth:"100%"},K==="left"&&me,t.createElement(H,W({ref:re,onClick:he,"aria-disabled":te,"aria-expanded":k,"aria-controls":ue,"aria-labelledby":ve,"data-strapi-accordion-toggle":!0,expanded:k,type:"button",flex:1,minWidth:0},ce),t.createElement(t.Fragment,null,t.createElement(T.y,W({},Ae),L),U&&t.createElement(O.Z,{as:"p",id:Ee,textColor:ye},U))),K==="right"&&t.createElement(y.K,{horizontal:!0,spacing:3},me,q),K==="left"&&q))};A.defaultProps={action:void 0,as:"span",description:void 0,variant:"primary",togglePosition:"right"},A.propTypes={action:l.node,as:l.string,description:l.string,title:l.string.isRequired,togglePosition:l.oneOf(["right","left"]),variant:l.oneOf(["primary","secondary"])}},36989:(B,j,s)=>{"use strict";s.d(j,{Z:()=>R});var t=s(67294),l=s(45697),a=s(71893),d=s(35961),m=s(46273);const O=(0,a.default)(m.k)`
  & > * + * {
    margin-left: ${({theme:f})=>f.spaces[2]};
  }

  margin-left: ${({pullRight:f})=>f?"auto":void 0};
`,T=(0,a.default)(O)`
  flex-shrink: 0;
`,R=({startActions:f,endActions:y})=>f||y?t.createElement(d.x,{paddingLeft:10,paddingRight:10},t.createElement(d.x,{paddingBottom:4},t.createElement(m.k,{justifyContent:"space-between",alignItems:"flex-start"},f&&t.createElement(O,{wrap:"wrap"},f),y&&t.createElement(T,{pullRight:!0},y)))):null;R.defaultProps={endActions:void 0,startActions:void 0},R.propTypes={endActions:l.node,startActions:l.node}},49066:(B,j,s)=>{"use strict";s.d(j,{D:()=>d});var t=s(67294),l=s(45697),a=s(35961);const d=({children:m})=>t.createElement(a.x,{paddingLeft:10,paddingRight:10},m);d.propTypes={children:l.node.isRequired}},67838:(B,j,s)=>{"use strict";s.d(j,{T:()=>Z});var t=s(67294),l=s(71893),a=s(45697),d=s(72735),m=s(35961),O=s(46273);const T=A=>{const P=(0,t.useRef)(null),[C,L]=(0,t.useState)(!0),U=([I])=>{L(I.isIntersecting)};return(0,t.useEffect)(()=>{const I=P.current,K=new IntersectionObserver(U,A);return I&&K.observe(P.current),()=>{I&&K.disconnect()}},[P,A]),[P,C]},R=(A,P)=>{(0,t.useLayoutEffect)(()=>{const C=new ResizeObserver(P);return Array.isArray(A)?A.map(L=>{L.current&&C.observe(L.current)}):A.current&&C.observe(A.current),()=>{C.disconnect()}},[])};var f=Object.defineProperty,y=Object.defineProperties,x=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,v=(A,P,C)=>P in A?f(A,P,{enumerable:!0,configurable:!0,writable:!0,value:C}):A[P]=C,D=(A,P)=>{for(var C in P||(P={}))p.call(P,C)&&v(A,C,P[C]);if(w)for(var C of w(P))h.call(P,C)&&v(A,C,P[C]);return A},S=(A,P)=>y(A,x(P)),F=(A,P)=>{var C={};for(var L in A)p.call(A,L)&&P.indexOf(L)<0&&(C[L]=A[L]);if(A!=null&&w)for(var L of w(A))P.indexOf(L)<0&&h.call(A,L)&&(C[L]=A[L]);return C};const W=()=>{const A=(0,t.useRef)(null),[P,C]=(0,t.useState)(null),[L,U]=T({root:null,rootMargin:"0px",threshold:0});return R(L,()=>{L.current&&C(L.current.getBoundingClientRect())}),(0,t.useEffect)(()=>{A.current&&C(A.current.getBoundingClientRect())},[A]),{containerRef:L,isVisible:U,baseHeaderLayoutRef:A,headerSize:P}},Z=A=>{const{containerRef:P,isVisible:C,baseHeaderLayoutRef:L,headerSize:U}=W();return t.createElement(t.Fragment,null,t.createElement("div",{style:{height:U==null?void 0:U.height},ref:P},C&&t.createElement(Q,D({ref:L},A))),!C&&t.createElement(Q,S(D({},A),{sticky:!0,width:U==null?void 0:U.width})))};Z.displayName="HeaderLayout";const H=(0,l.default)(m.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${A=>A.width}px;
  z-index: 4;
  box-shadow: ${({theme:A})=>A.shadows.tableShadow};
`,Q=t.forwardRef((A,P)=>{var C=A,{navigationAction:L,primaryAction:U,secondaryAction:I,subtitle:K,title:q,sticky:ce,width:re}=C,ne=F(C,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const se=typeof K=="string";return ce?t.createElement(H,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:re,"data-strapi-header-sticky":!0},t.createElement(O.k,{justifyContent:"space-between"},t.createElement(O.k,null,L&&t.createElement(m.x,{paddingRight:3},L),t.createElement(m.x,null,t.createElement(d.Z,D({variant:"beta",as:"h1"},ne),q),se?t.createElement(d.Z,{variant:"pi",textColor:"neutral600"},K):K),I?t.createElement(m.x,{paddingLeft:4},I):null),t.createElement(O.k,null,U?t.createElement(m.x,{paddingLeft:2},U):void 0))):t.createElement(m.x,{ref:P,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:L?6:8,background:"neutral100","data-strapi-header":!0},L?t.createElement(m.x,{paddingBottom:2},L):null,t.createElement(O.k,{justifyContent:"space-between"},t.createElement(O.k,null,t.createElement(d.Z,D({as:"h1",variant:"alpha"},ne),q),I?t.createElement(m.x,{paddingLeft:4},I):null),U),se?t.createElement(d.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},K):K)});Q.displayName="BaseHeaderLayout",Q.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},Q.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,sticky:a.bool,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired,width:a.number},Z.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},Z.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired}},185:(B,j,s)=>{"use strict";s.d(j,{o:()=>w});var t=s(67294),l=s(45697),a=s(71893),d=Object.defineProperty,m=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,R=(p,h,v)=>h in p?d(p,h,{enumerable:!0,configurable:!0,writable:!0,value:v}):p[h]=v,f=(p,h)=>{for(var v in h||(h={}))O.call(h,v)&&R(p,v,h[v]);if(m)for(var v of m(h))T.call(h,v)&&R(p,v,h[v]);return p},y=(p,h)=>{var v={};for(var D in p)O.call(p,D)&&h.indexOf(D)<0&&(v[D]=p[D]);if(p!=null&&m)for(var D of m(p))h.indexOf(D)<0&&T.call(p,D)&&(v[D]=p[D]);return v};const x=a.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,w=p=>{var h=p,{labelledBy:v}=h,D=y(h,["labelledBy"]);const S=v||"main-content-title";return t.createElement(x,f({"aria-labelledby":S,id:"main-content",tabIndex:-1},D))};w.defaultProps={labelledBy:void 0},w.propTypes={labelledBy:l.string}},67109:(B,j,s)=>{"use strict";s.d(j,{Z:()=>R});var t=s(67294),l=Object.defineProperty,a=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,O=(f,y,x)=>y in f?l(f,y,{enumerable:!0,configurable:!0,writable:!0,value:x}):f[y]=x,T=(f,y)=>{for(var x in y||(y={}))d.call(y,x)&&O(f,x,y[x]);if(a)for(var x of a(y))m.call(y,x)&&O(f,x,y[x]);return f};function R(f){return t.createElement("svg",T({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f),t.createElement("path",{d:"M24 13.3a.2.2 0 01-.2.2H5.74l8.239 8.239a.2.2 0 010 .282L12.14 23.86a.2.2 0 01-.282 0L.14 12.14a.2.2 0 010-.282L11.86.14a.2.2 0 01.282 0L13.98 1.98a.2.2 0 010 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6z",fill:"#212134"}))}},78114:(B,j,s)=>{"use strict";s.d(j,{Z:()=>R});var t=s(67294),l=Object.defineProperty,a=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,O=(f,y,x)=>y in f?l(f,y,{enumerable:!0,configurable:!0,writable:!0,value:x}):f[y]=x,T=(f,y)=>{for(var x in y||(y={}))d.call(y,x)&&O(f,x,y[x]);if(a)for(var x of a(y))m.call(y,x)&&O(f,x,y[x]);return f};function R(f){return t.createElement("svg",T({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 00-.374.68v1.65a.797.797 0 00.384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 00.216.744l1.167 1.166a.801.801 0 00.744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 00.679.374h1.649a.797.797 0 00.686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 00.744-.216l1.166-1.167a.803.803 0 00.216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 00.374-.679v-1.649a.796.796 0 00-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 00-.216-.744l-1.166-1.173a.802.802 0 00-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 00-.68-.374h-1.65a.797.797 0 00-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 00-.744.216L2.921 4.094a.802.802 0 00-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8zM12 17a5 5 0 100-10 5 5 0 000 10z",fill:"#212134"}))}}}]);
